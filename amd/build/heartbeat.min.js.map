{"version":3,"file":"heartbeat.min.js","sources":["../src/heartbeat.js"],"sourcesContent":["define([], function() {\n    return {\n        init: function(keepaliveUrl, interval) {\n\n            if (!keepaliveUrl || interval <= 0) {\n                return;\n            }\n\n            /**\n             * Sends a heartbeat ping to the server.\n             * @returns {void}\n             **/\n            function sendHeartbeat() {\n                // eslint-disable-next-line no-console\n                console.log('Sending heartbeat to:', keepaliveUrl, 'at', new Date().toISOString());\n\n                fetch(keepaliveUrl, {\n                    method: 'POST',\n                    credentials: 'include',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                })\n                .then(response => {\n                    // eslint-disable-next-line no-console\n                    console.debug('Heartbeat response status:', response.status);\n                })\n                .catch(err => {\n                    // eslint-disable-next-line no-console\n                    console.debug('Heartbeat request failed:', err);\n                });\n            }\n\n            // Initial heartbeat after load.\n            setTimeout(() => {\n                sendHeartbeat();\n                setInterval(sendHeartbeat, interval);\n            }, interval);\n        }\n    };\n});\n/*\ndefine([], function () {\n    return {\n        init: function () {\n            setInterval(() => {\n                // eslint-disable-next-line no-console\n                console.log('ConsoleLogger plugin: message at', new Date().toISOString());\n                M.util.js_log('Heartbeat ping at ' + new Date().toISOString());\n            }, 10000); // every 10 seconds\n        }\n    };\n});\n*/\n"],"names":["define","init","keepaliveUrl","interval","sendHeartbeat","console","log","Date","toISOString","fetch","method","credentials","headers","then","response","debug","status","catch","err","setTimeout","setInterval"],"mappings":"AAAAA,OAAM,4BAAC,GAAI,WACP,MAAO,CACHC,KAAM,SAASC,aAAcC,UAUzB,SAASC,gBAELC,QAAQC,IAAI,wBAAyBJ,aAAc,MAAM,IAAIK,MAAOC,eAEpEC,MAAMP,aAAc,CAChBQ,OAAQ,OACRC,YAAa,UACbC,QAAS,CACL,eAAgB,sBAGvBC,KAAKC,WAEFT,QAAQU,MAAM,6BAA8BD,SAASE,UAExDC,MAAMC,MAEHb,QAAQU,MAAM,4BAA6BG,MAEnD,EA3BKhB,cAAgBC,UAAY,GA8BjCgB,WAAW,KACPf,gBACAgB,YAAYhB,cAAeD,WAC5BA,SACP,EAER"}